<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title></title>
		<script src="js/mui.min.js"></script>
		<script src="js/crypto-js.js"></script>
		<link href="css/mui.min.css" rel="stylesheet" />
		<script type="text/javascript" charset="UTF-8">
			mui.init();
			(function(global){"use strict";var _Base64=global.Base64;var version="2.1.9";var buffer;if(typeof module!=="undefined"&&module.exports){try{buffer=require("buffer").Buffer}catch(err){}}var b64chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var b64tab=function(bin){var t={};for(var i=0,l=bin.length;i<l;i++)t[bin.charAt(i)]=i;return t}(b64chars);var fromCharCode=String.fromCharCode;var cb_utob=function(c){if(c.length<2){var cc=c.charCodeAt(0);return cc<128?c:cc<2048?fromCharCode(192|cc>>>6)+fromCharCode(128|cc&63):fromCharCode(224|cc>>>12&15)+fromCharCode(128|cc>>>6&63)+fromCharCode(128|cc&63)}else{var cc=65536+(c.charCodeAt(0)-55296)*1024+(c.charCodeAt(1)-56320);return fromCharCode(240|cc>>>18&7)+fromCharCode(128|cc>>>12&63)+fromCharCode(128|cc>>>6&63)+fromCharCode(128|cc&63)}};var re_utob=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g;var utob=function(u){return u.replace(re_utob,cb_utob)};var cb_encode=function(ccc){var padlen=[0,2,1][ccc.length%3],ord=ccc.charCodeAt(0)<<16|(ccc.length>1?ccc.charCodeAt(1):0)<<8|(ccc.length>2?ccc.charCodeAt(2):0),chars=[b64chars.charAt(ord>>>18),b64chars.charAt(ord>>>12&63),padlen>=2?"=":b64chars.charAt(ord>>>6&63),padlen>=1?"=":b64chars.charAt(ord&63)];return chars.join("")};var btoa=global.btoa?function(b){return global.btoa(b)}:function(b){return b.replace(/[\s\S]{1,3}/g,cb_encode)};var _encode=buffer?function(u){return(u.constructor===buffer.constructor?u:new buffer(u)).toString("base64")}:function(u){return btoa(utob(u))};var encode=function(u,urisafe){return!urisafe?_encode(String(u)):_encode(String(u)).replace(/[+\/]/g,function(m0){return m0=="+"?"-":"_"}).replace(/=/g,"")};var encodeURI=function(u){return encode(u,true)};var re_btou=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g");var cb_btou=function(cccc){switch(cccc.length){case 4:var cp=(7&cccc.charCodeAt(0))<<18|(63&cccc.charCodeAt(1))<<12|(63&cccc.charCodeAt(2))<<6|63&cccc.charCodeAt(3),offset=cp-65536;return fromCharCode((offset>>>10)+55296)+fromCharCode((offset&1023)+56320);case 3:return fromCharCode((15&cccc.charCodeAt(0))<<12|(63&cccc.charCodeAt(1))<<6|63&cccc.charCodeAt(2));default:return fromCharCode((31&cccc.charCodeAt(0))<<6|63&cccc.charCodeAt(1))}};var btou=function(b){return b.replace(re_btou,cb_btou)};var cb_decode=function(cccc){var len=cccc.length,padlen=len%4,n=(len>0?b64tab[cccc.charAt(0)]<<18:0)|(len>1?b64tab[cccc.charAt(1)]<<12:0)|(len>2?b64tab[cccc.charAt(2)]<<6:0)|(len>3?b64tab[cccc.charAt(3)]:0),chars=[fromCharCode(n>>>16),fromCharCode(n>>>8&255),fromCharCode(n&255)];chars.length-=[0,0,2,1][padlen];return chars.join("")};var atob=global.atob?function(a){return global.atob(a)}:function(a){return a.replace(/[\s\S]{1,4}/g,cb_decode)};var _decode=buffer?function(a){return(a.constructor===buffer.constructor?a:new buffer(a,"base64")).toString()}:function(a){return btou(atob(a))};var decode=function(a){return _decode(String(a).replace(/[-_]/g,function(m0){return m0=="-"?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))};var noConflict=function(){var Base64=global.Base64;global.Base64=_Base64;return Base64};global.Base64={VERSION:version,atob:atob,btoa:btoa,fromBase64:decode,toBase64:encode,utob:utob,encode:encode,encodeURI:encodeURI,btou:btou,decode:decode,noConflict:noConflict};if(typeof Object.defineProperty==="function"){var noEnum=function(v){return{value:v,enumerable:false,writable:true,configurable:true}};global.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",noEnum(function(){return decode(this)}));Object.defineProperty(String.prototype,"toBase64",noEnum(function(urisafe){return encode(this,urisafe)}));Object.defineProperty(String.prototype,"toBase64URI",noEnum(function(){return encode(this,true)}))}}if(global["Meteor"]){Base64=global.Base64}})(this);
		</script>
		<style type="text/css">
			body {
				background: black;
			}
		</style>
	</head>

	<body onload=give_instru()>
<!--<<<<<<< HEAD
		<audio controls autoplay style="display: none;">
			<source src="sfx/00-genesis-toejam-jammin.mp3" type="audio/mpeg">
		</audio>
=======
		<script>
  mySound = new Audio("sfx/00-genesis-toejam-jammin.mp3");
  mySound.play();
</script>
>>>>>>> ccc7413d8bee4e1780aebd6d42be8ca95c9e7207	作者：378681741@qq.com
-->
		<script>function give_instru(){alert('A group of terrorists is planning to carry out attack in Britain, MI6 has intercepted their emails, find out which city they want to attack by dectypting their communication and save the Britain')}</script>
		<header class="mui-bar mui-bar-nav" style="height:74px;background-color: rgba(61,171,201,0);box-shadow: none;">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left" style="color: #FFFFFF;margin-top: 30px;"></a>
		</header>
		<div id="status" style="display: none;">1</div>
		<div id="intro">
			<h1 id="mission" style="color: red;margin-top: 30%;text-align: center;">MISSION!!!</h1>
			<h5 style="color: white;margin-top: 10%;text-align: center;">Decrpt enemy telegram<br><br>Protect the Britain!!!!!!</h5>
			<div id="img" style="margin-top:10%;text-align: center;">
				<img src="img/map.png" style="width: 40%">
			</div>
			<button id="start" style="margin-top: 20%;margin-left:calc(50% - 30px);width:60px;border: solid white 1px;background-color: rgba(0,0,0,0);color: white;border-radius: 8px;">start</button>
		</div>
		<div id="map" style="display: none;">
			<div style="margin-top:25%;text-align: center;">
				<img id="img_map" src="img/map.png" style="width: 40%">
			</div>
			<div id="plane_right" style="position:absolute;top:50%;display: none;">
				<img src="img/right_plane.png" style="width: 80px;">
			</div>
			<div id="telegram" style="position:absolute;top:calc(74px + 1%);width:100%;display: none;">
				<div id="nowtype" style="display: none;">MD5</div>
				<h3 style="color: white;margin-left: 5%;padding-bottom: 5%;">Telegram ciphertext</h3>
				<h5 id="MD5ciphertext" style="color: white;margin-left: 10%;display: none;word-wrap: break-word;width: 75%;"><br><br>U2FsdGVkX1/XaD/1Ox5ku74DN3uCnXfXPL1KRlNGwok=<br><br></h5>
				<h5 id="Rabbitciphertext" style="color: white;margin-left: 10%;display: none;word-wrap: break-word;width: 75%;"><br><br>U2FsdGVkX1/XaD/1Ox5ku74DN3uCnXfXPL1KRlNGwok=<br><br></h5>
				<h5 id="SHAciphertext" style="color: white;margin-left: 10%;display: none;word-wrap: break-word;width: 75%;"><br><br>U2FsdGVkX1/XaD/1Ox5ku74DN3uCnXfXPL1KRlNGwok=<br><br></h5>
				<h5 id="AESciphertext" style="color: white;margin-left: 10%;display: none;word-wrap: break-word;width: 75%;"><br><br>U2FsdGVkX1/XaD/1Ox5ku74DN3uCnXfXPL1KRlNGwok=<br><br></h5>
				<h5 id="DESciphertext" style="color: white;margin-left: 10%;display: none;word-wrap: break-word;width: 75%;"><br><br>U2FsdGVkX1/XaD/1Ox5ku74DN3uCnXfXPL1KRlNGwok=<br><br></h5>
				<h3 style="color: white;margin-left: 5%;margin-top: 5%;">Tools</h3>
				<div id="buttons" style="text-align: center;">
					<h3 id="right" style="color: red;display: none;">Right</h3>
					<button id="MD5" style="width:70%;margin-top:3%;border: solid white 1px;background-color: rgba(0,0,0,0);color: white;border-radius: 8px;">MD5</button>
					<button id="Rabbit" style="width:70%;margin-top:8%;border: solid white 1px;background-color: rgba(0,0,0,0);color: white;border-radius: 8px;">Base64</button>
					<button id="SHA" style="width:70%;margin-top:8%;border: solid white 1px;background-color: rgba(0,0,0,0);color: white;border-radius: 8px;">SHA</button>
					<button id="AES" style="width:70%;margin-top:8%;border: solid white 1px;background-color: rgba(0,0,0,0);color: white;border-radius: 8px;">AES</button>
					<button id="DES" style="width:70%;margin-top:8%;border: solid white 1px;background-color: rgba(0,0,0,0);color: white;border-radius: 8px;">DES</button>
				</div>
				<div id="time" style="text-align: center;margin-top: 5%;">
					<h4 id="time_h4" style="color: white;font-weight: 400;margin-top: 3%;">Enemy coming in 20 s</h4>
					<h6 id='hint'><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>Hint</h6>
				</div>
			</div>
		</div>
	</body>
	<script type="text/javascript">
		var codes = new Array();
		var types = new Array();
		var hints = new Array();
		switch(Math.floor(Math.random() * 5)) {
			case 0:
				codes[0] = 'Southampton';
				break;
			case 1:
				codes[0] = 'London';
				break;
			case 2:
				codes[0] = 'Manchester';
				break;
			case 3:
				codes[0] = 'Birmingham';
				break;
			case 4:
				codes[0] = 'Glasgow';
				break;
			default:
				break;
		}
		for(i = 0; i < 5; i++) {
			switch(Math.floor(Math.random() * 5)) {
				case 0:
					codes[i + 1] = CryptoJS.MD5(codes[i]); 
					types[i] = "MD5";
					hints[i] = 'M';
					break;
				case 1:
					codes[i + 1] = Base64.encode(codes[i]); 
					types[i] = "Rabbit";
					hints[i] = 'B';
					break;
				case 2:
					codes[i + 1] = CryptoJS.SHA1(codes[i]);
					types[i] = "SHA";
					hints[i] = 'S';
					break;
				case 3:
					codes[i + 1] = CryptoJS.AES.encrypt(codes[i],'passowrd').ciphertext; 
					types[i] = "AES";
					hints[i] = 'A';
					break;
				case 4:
					codes[i + 1] = CryptoJS.DES.encrypt(codes[i],'cryptology').ciphertext;
					types[i] = "DES";
					hints[i] = 'D';
					break;
				default:
					break;
			}
		}
		var nowIndex=0;
		var time = 20;
		//var defeat = 0;
		var missionInt = setInterval(function() {
			if(document.getElementById('mission').style.color == "red") {
				document.getElementById('mission').style.color = "white";
			} else {
				document.getElementById('mission').style.color = "red";
			}
		}, 500);
		document.getElementById('start').addEventListener('click', function(event) {
			document.getElementById('intro').style.display = "none";
			document.getElementById('map').style.display = "block";
			document.getElementById('hint').innerHTML ='<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>'+hints[0];
			window.clearInterval(missionInt);
			var originWidth = document.getElementById('img_map').offsetWidth;
			for(i = 0; i <= 80; i++) {
				setTimeout(function() {
					document.getElementById('img_map').style.width = document.getElementById('img_map').offsetWidth + (document.body.clientWidth - originWidth) / 100 + 'px';
				}, i * 10);
			}
			for(i = 0; i <= 150; i++) {
				setTimeout(function() {
					document.getElementById('plane_right').style.display = "block";
					document.getElementById('plane_right').style.left = document.getElementById('plane_right').offsetLeft + 3 + 'px';
				}, 800 + i * 10);
				if(i == 150) {
					setTimeout(function() {
						document.getElementById('plane_right').style.display = "none";
					}, 800 + i * 10);
				}
			}
			setTimeout(function() {
				document.getElementById('img_map').style.opacity = 0.2;
				document.getElementById('telegram').style.display = 'block';
				document.getElementById(types[nowIndex]+'ciphertext').innerText = (nowIndex+1) +"."+codes[nowIndex+1];
				document.getElementById(types[nowIndex]+'ciphertext').style.display = 'block';
				var timeInt = setInterval(function() {
					if(time <= 0){
						window.clearInterval(timeInt);
						defeat();
					}
					time--;
					document.getElementById('time_h4').innerText = 'Enemy coming in ' + time + ' s';
				}, 1000);			
			}, 2300);
		}, false);
		document.getElementById('MD5').addEventListener('click',function(event){
			if(types[nowIndex] == 'MD5'){
				next();
			}else{
				if(time < 5){
					time = 0;
				}else{
					time -= 5;
				}
				document.getElementById('right').innerText = "Wrong";
				document.getElementById('right').style.display = "Block";
			}
		},false);
		document.getElementById('Rabbit').addEventListener('click',function(event){
			if(types[nowIndex] == 'Rabbit'){
				next();
			}else{
				if(time < 5){
					time = 0;
				}else{
					time -= 5;
				}
				document.getElementById('right').innerText = "Wrong";
				document.getElementById('right').style.display = "Block";
			}
		},false);
		document.getElementById('SHA').addEventListener('click',function(event){
			if(types[nowIndex] == 'SHA'){
				next();
			}else{
				if(time < 5){
					time = 0;
				}else{
					time -= 5;
				}
				document.getElementById('right').innerText = "Wrong";
				document.getElementById('right').style.display = "Block";
			}
		},false);
		document.getElementById('AES').addEventListener('click',function(event){
			if(types[nowIndex] == 'AES'){
				next();
			}else{
				if(time < 5){
					time = 0;
				}else{
					time -= 5;
				}
				document.getElementById('right').innerText = "Wrong";
				document.getElementById('right').style.display = "Block";
			}
		},false);
		document.getElementById('DES').addEventListener('click',function(event){
			if(types[nowIndex] == 'DES'){
				next();
			}else{
				if(time < 5){
					time = 0;
				}else{
					time -= 5;
				}
				document.getElementById('right').innerText = "Wrong";
				document.getElementById('right').style.display = "Block";
			}
		},false);
		function next(){
			if(nowIndex == 4){
				mySound = new Audio("sfx/Auditorium Applause-SoundBible.com-280911206.mp3");
				mySound.play();
				alert('Congratulations, you have decrypt that enemy would attack '+codes[0]);
				mui.back();
			}
			nowIndex++;
			time = 20;
			document.getElementById('right').style.display = "None";
			document.getElementById(types[nowIndex-1]+'ciphertext').style.display = "none";
			document.getElementById(types[nowIndex]+'ciphertext').innerText = (nowIndex+1)+"."+codes[nowIndex+1];
			document.getElementById(types[nowIndex]+'ciphertext').style.display = "block";
			document.getElementById('hint').innerHTML = '<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>'+hints[nowIndex];
		}
		function defeat()
		{
			alert('Operation fialed.');
			mui.back();
		}
	</script>

</html>
